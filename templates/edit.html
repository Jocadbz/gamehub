<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Game - {{.Title}}</title>
    <link rel="stylesheet" href="{{.BaseURL}}/static/css/style.css">
</head>
<body>
    <header>
        <h1>{{.Title}}</h1>
        <nav>
            <a href="{{.BaseURL}}">Home</a>
            <a href="{{.BaseURL}}/upload">Upload Game</a>
        </nav>
    </header>
    <main class="upload-form">
        <h2>Edit Game: {{.Game.Name}}</h2>
        <form action="{{.BaseURL}}/update-game/{{.Game.ID}}" method="POST" enctype="multipart/form-data" id="editForm">
            <label for="name">Game Name:</label>
            <input type="text" id="name" name="name" value="{{.Game.Name}}" required>
            
            <label for="description">Description:</label>
            <textarea id="description" name="description" required>{{.Game.Description}}</textarea>
            
            <label for="image">Main Image (optional, upload to replace):</label>
            <input type="file" id="image" name="image" accept="image/*">
            
            <label for="download_path">Download File Path on Server:</label>
            <input type="text" id="download_path" name="download_path" value="{{.Game.DownloadPath}}" placeholder="/path/to/game/file" required>
            
            <label for="screenshots">Screenshots (up to 6 images, optional, upload to add/replace):</label>
            <input type="file" id="screenshots" name="screenshots" accept="image/*" multiple>
            <div id="screenshotError" style="color: red; display: none;">You can only upload up to 6 image files.</div>
            <div id="formatError" style="color: red; display: none;">Please select only image files.</div>
            
            <button type="submit">Update Game</button>
        </form>
    </main>

    <script>
        document.getElementById('editForm').addEventListener('submit', function(e) {
            const screenshotInput = document.getElementById('screenshots');
            const files = screenshotInput.files;
            const screenshotError = document.getElementById('screenshotError');
            const formatError = document.getElementById('formatError');
            
            screenshotError.style.display = 'none';
            formatError.style.display = 'none';
            
            if (files.length > 6) {
                e.preventDefault();
                screenshotError.style.display = 'block';
                return;
            }
            
            for (let i = 0; i < files.length; i++) {
                if (!files[i].type.startsWith('image/')) {
                    e.preventDefault();
                    formatError.style.display = 'block';
                    return;
                }
            }
        });
    </script>
</body>
</html>